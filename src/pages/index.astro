---
import Layout from '../layouts/Layout.astro';
import Welcome from '../components/Welcome.astro';
import VolleyballBall from '../components/VolleyballBall.astro';
import MessageSystem from '../components/MessageSystem.astro';
import MusicControl from '../components/MusicControl.astro';
import StarField from '../components/StarField.astro';
---

<Layout>
	<Welcome />
	<StarField />

	<div class="page" id="main-content">
		<header class="page__header">
			<div class="page__date-wrap">
				<p class="page__date">14 · 02 · 2026</p>
			</div>
			<h1 class="page__name">Haru</h1>
			<div class="page__divider"></div>
			<p class="page__sub">esto es para ti ✦</p>
		</header>

		<VolleyballBall />

		<footer class="page__footer">
			<p class="page__footer-text">hecho con cariño ♡</p>
		</footer>
	</div>

	<MessageSystem />
	<MusicControl />
</Layout>

<style>
	.page {
		display: flex;
		flex-direction: column;
		align-items: center;
		min-height: 100dvh;
		width: 100%;
		padding: 0 0 8rem;
		opacity: 0;
		transition: opacity 0.8s ease;
	}

	.page__header {
		width: 100%;
		padding: 2.5rem 1.5rem 1.2rem;
		text-align: center;
	}

	.page__date-wrap {
		display: flex;
		justify-content: center;
		margin-bottom: 0.8rem;
	}

	.page__date {
		font-size: 0.7rem;
		letter-spacing: 0.5em;
		color: var(--text-soft);
		margin-bottom: 0;
		animation: appear 0.8s ease 0.2s both;
		position: relative;
		display: inline-block;
		text-shadow:
			0 0 10px rgba(200, 192, 180, 0.3),
			0 0 30px rgba(200, 192, 180, 0.15),
			0 0 60px rgba(200, 192, 180, 0.08);
	}

	.page__date::before {
		content: '';
		position: absolute;
		top: 50%;
		left: -20px;
		right: -20px;
		height: 1px;
		background: linear-gradient(90deg, transparent, var(--border-subtle), transparent);
		transform: translateY(-50%);
		opacity: 0;
		animation: dateLineAppear 1.5s ease 1s both;
	}

	.page__date::after {
		content: '';
		position: absolute;
		top: -4px;
		left: -8px;
		right: -8px;
		bottom: -4px;
		border-radius: 20px;
		background: radial-gradient(ellipse, rgba(200, 192, 180, 0.06) 0%, transparent 70%);
		animation: dateGlow 3s ease-in-out infinite;
		pointer-events: none;
	}

	.page__name {
		font-family: var(--serif);
		font-size: 2.8rem;
		font-weight: 400;
		letter-spacing: 0.12em;
		color: var(--text-bright);
		line-height: 1.1;
		animation: appear 0.8s ease 0.4s both;
	}

	.page__divider {
		width: 40px;
		height: 1px;
		background: var(--border-subtle);
		margin: 0.8rem auto;
		animation: appear 0.8s ease 0.5s both;
	}

	.page__sub {
		font-size: 0.8rem;
		letter-spacing: 0.2em;
		color: var(--text-muted);
		margin-top: 0;
		animation: appear 0.8s ease 0.6s both;
	}

	.page__footer {
		margin-top: auto;
		padding: 1.5rem;
		text-align: center;
	}

	.page__footer-text {
		font-size: 0.65rem;
		letter-spacing: 0.25em;
		color: var(--text-muted);
		opacity: 0.5;
		animation: breathe 4s ease infinite;
	}

	@keyframes dateGlow {
		0%, 100% {
			opacity: 0.4;
			filter: brightness(1);
			transform: scale(1);
		}
		50% {
			opacity: 1;
			filter: brightness(1.3);
			transform: scale(1.02);
		}
	}

	@keyframes dateLineAppear {
		from { opacity: 0; transform: translateY(-50%) scaleX(0); }
		to { opacity: 1; transform: translateY(-50%) scaleX(1); }
	}

	@keyframes shimmer {
		0% { background-position: -200% center; }
		100% { background-position: 200% center; }
	}
</style>

<script>
	const main = document.getElementById('main-content')!;

	document.addEventListener('welcome:done', () => {
		main.style.opacity = '1';
	});
</script>
